# ZK News Cards API Documentation

This document describes the API structure generated by the `generate.js` script, which creates static JSON files under the `/docs/api/` directory.

## API Structure

The API follows a hierarchical structure organized by language, year, month, and day:

```
/docs/api/
  ├── [language]/
  │   ├── index.json
  │   ├── [year]/
  │   │   ├── index.json
  │   │   ├── [month]/
  │   │   │   ├── index.json
  │   │   │   ├── [day].json
```

### Supported Languages

The API currently supports the following languages:
- `zh` (Chinese)
- `en` (English)

## API Endpoints

### Main Index

**Path**: `/api/[language]/index.json`

Returns a mapping of years to available months:

```json
{
  "2025": ["01", "02", "03"],
  "2024": ["11", "12"]
}
```

### Year Index

**Path**: `/api/[language]/[year]/index.json`

Returns a mapping of months to available days:

```json
{
  "01": ["01", "05", "12", "20"],
  "02": ["03", "15", "28"]
}
```

### Month Index

**Path**: `/api/[language]/[year]/[month]/index.json`

Returns a mapping of days to summary data:

```json
{
  "01": {
    "date": "2025-01-01",
    "projects": ["Project A", "Project B"],
    "insights": ["Key insight about the industry", "Another observation"]
  },
  "05": {
    "date": "2025-01-05",
    "projects": ["Project C", "Project D"]
  }
}
```

Note: Both `projects` and `insights` fields will be `undefined` if they have no elements.

### Day Content

**Path**: `/api/[language]/[year]/[month]/[day].json`

Returns detailed content for a specific day:

```json
{
  "date": "2025-01-01",
  "projects": [
    {
      "name": "Project A",
      "url": "https://example.com/project-a",
      "urls": ["https://example.com/project-a", "https://github.com/project-a"],
      "type": "开源",
      "tags": ["AI", "Blockchain"],
      "summary": "Project A is a new open-source AI project...",
      "notes": ["Important implementation detail", "Key feature description"]
    },
    {
      "name": "Project B",
      "url": "https://example.com/project-b",
      "type": "论文",
      "tags": ["ML", "Research"],
      "summary": "Project B presents a novel approach to..."
    }
  ],
  "insights": [
    "Insight about the industry trends",
    "Another interesting observation"
  ]
}
```

Note: 
- The `urls` field is optional and only present if a project has multiple URLs.
- The `notes` field is optional and only present if a project has additional notes.
- The `insights` field will be `undefined` if there are no insights.
- Fields like `tags` will be `undefined` if they have no elements.

## Data Processing

The API generation includes the following processing steps:

1. **Language Filtering**: Only generates content for languages that have explicit support in the data.
2. **Content Localization**: Processes project data and insights to use language-specific content when available.
3. **Summary Extraction**: Creates simplified summaries for index files.

## Generating the API

To generate the API files, run:

```bash
yarn api
```

This command executes the API generator script through the CLI interface.
